import{r as m,b as x,c as i,a as e,w as y,d as p,t as g,e as a,v as d,f as w,g as h,u as k,o as u}from"./index-DLrRCFhZ.js";const z={class:"flex items-center justify-center min-h-[calc(100vh-14rem)] py-12 px-4 sm:px-6 lg:px-8"},N={class:"w-full max-w-md space-y-8 p-8 bg-card rounded-xl border border-border shadow-lg"},V={key:0,class:"p-3 text-sm text-red-500 bg-red-50 rounded-md border border-red-200"},C={class:"space-y-4"},S={class:"mt-1"},j={class:"mt-1"},q={class:"mt-1"},E={class:"mt-1"},M={key:0},O={class:"mt-1"},U=["disabled"],B={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},T={__name:"SignupView",setup(D){const v=k(),t=m({name:"",email:"",password:"",role:"client",organizationName:""}),s=m(!1),l=m(""),c=x(()=>t.value.role==="organizer"),b=async()=>{l.value="",s.value=!0;try{const n={name:t.value.name,email:t.value.email,password:t.value.password,role:t.value.role,...c.value&&{organizationName:t.value.organizationName}},o=await fetch("/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){const f=await o.json();throw new Error(f.error||f.message||"Registration failed")}const r=await o.json();console.log("Registration successful:",r),v.push("/login")}catch(n){l.value=n.message}finally{s.value=!1}};return(n,o)=>(u(),i("div",z,[e("div",N,[o[13]||(o[13]=e("div",{class:"text-center"},[e("h2",{class:"mt-6 text-3xl font-bold tracking-tight text-foreground"}," Create an account "),e("p",{class:"mt-2 text-sm text-muted-foreground"}," Join EventHub to start your journey ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:y(b,["prevent"])},[l.value?(u(),i("div",V,g(l.value),1)):p("",!0),e("div",C,[e("div",null,[o[5]||(o[5]=e("label",{for:"name",class:"block text-sm font-medium text-foreground"},"Full Name",-1)),e("div",S,[a(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=r=>t.value.name=r),name:"name",type:"text",autocomplete:"name",required:"",class:"block w-full rounded-md border border-input bg-transparent px-3 py-2 text-foreground shadow-sm placeholder-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"John Doe"},null,512),[[d,t.value.name]])])]),e("div",null,[o[6]||(o[6]=e("label",{for:"email",class:"block text-sm font-medium text-foreground"},"Email address",-1)),e("div",j,[a(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=r=>t.value.email=r),name:"email",type:"email",autocomplete:"email",required:"",class:"block w-full rounded-md border border-input bg-transparent px-3 py-2 text-foreground shadow-sm placeholder-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"you@example.com"},null,512),[[d,t.value.email]])])]),e("div",null,[o[7]||(o[7]=e("label",{for:"password",class:"block text-sm font-medium text-foreground"},"Password",-1)),e("div",q,[a(e("input",{id:"password","onUpdate:modelValue":o[2]||(o[2]=r=>t.value.password=r),name:"password",type:"password",autocomplete:"new-password",required:"",minlength:"6",class:"block w-full rounded-md border border-input bg-transparent px-3 py-2 text-foreground shadow-sm placeholder-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"••••••••"},null,512),[[d,t.value.password]])])]),e("div",null,[o[9]||(o[9]=e("label",{for:"role",class:"block text-sm font-medium text-foreground"},"Role",-1)),e("div",E,[a(e("select",{id:"role","onUpdate:modelValue":o[3]||(o[3]=r=>t.value.role=r),name:"role",required:"",class:"block w-full rounded-md border border-input bg-transparent px-3 py-2 text-foreground shadow-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm"},[...o[8]||(o[8]=[e("option",{value:"client"},"Client",-1),e("option",{value:"organizer"},"Organizer",-1)])],512),[[w,t.value.role]])])]),c.value?(u(),i("div",M,[o[10]||(o[10]=e("label",{for:"organizationName",class:"block text-sm font-medium text-foreground"},"Organization Name",-1)),e("div",O,[a(e("input",{id:"organizationName","onUpdate:modelValue":o[4]||(o[4]=r=>t.value.organizationName=r),name:"organizationName",type:"text",required:"",class:"block w-full rounded-md border border-input bg-transparent px-3 py-2 text-foreground shadow-sm placeholder-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"My Awesome Events Co."},null,512),[[d,t.value.organizationName]])])])):p("",!0)]),e("div",null,[e("button",{type:"submit",disabled:s.value,class:"flex w-full justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-primary-foreground shadow-sm hover:bg-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s.value?(u(),i("svg",B,[...o[11]||(o[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):p("",!0),h(" "+g(s.value?"Creating account...":"Sign up"),1)],8,U)]),o[12]||(o[12]=e("div",{class:"text-center text-sm"},[e("span",{class:"text-muted-foreground"},"Already have an account?"),e("a",{href:"/login",class:"ml-1 font-medium text-primary hover:text-primary/90"},"Sign in")],-1))],32)])]))}};export{T as default};
